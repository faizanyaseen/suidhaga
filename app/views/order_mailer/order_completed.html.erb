<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%= t('order_mailer.order_completed.subject', order_number: @order.order_number, shop_name: @shop.name) %></title>
    <style>
      body { 
        font-family: Arial, sans-serif; 
        line-height: 1.6; 
        color: #333; 
        max-width: 600px; 
        margin: 0 auto; 
        padding: 20px;
        background-color: #f8f9fa;
      }
      .container { 
        background-color: white; 
        border-radius: 8px; 
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        padding: 30px;
      }
      .header { 
        text-align: center; 
        border-bottom: 2px solid #e9ecef; 
        padding-bottom: 20px; 
        margin-bottom: 30px;
      }
      .header h1 { 
        color: #28a745; 
        margin: 0;
        font-size: 28px;
      }
      .order-info { 
        background-color: #f8f9fa; 
        padding: 20px; 
        border-radius: 6px; 
        margin: 20px 0;
      }
      .order-details {
        margin: 20px 0;
      }
      .order-details table {
        width: 100%;
        border-collapse: collapse;
      }
      .order-details th,
      .order-details td {
        padding: 10px;
        text-align: left;
        border-bottom: 1px solid #e9ecef;
      }
      .order-details th {
        background-color: #f8f9fa;
        font-weight: bold;
      }
      .total {
        font-size: 18px;
        font-weight: bold;
        color: #28a745;
      }
      .footer { 
        text-align: center; 
        border-top: 2px solid #e9ecef; 
        padding-top: 20px; 
        margin-top: 30px; 
        color: #6c757d;
      }
      .btn {
        display: inline-block;
        padding: 12px 24px;
        background-color: #007bff;
        color: white;
        text-decoration: none;
        border-radius: 5px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ðŸŽ‰ <%= t('order_mailer.order_completed.header') %></h1>
        <p><%= t('order_mailer.order_completed.subtitle') %></p>
      </div>

      <div class="content">
        <h2><%= t('order_mailer.order_completed.greeting', name: @customer.first_name) %></h2>
        
        <p><%= t('order_mailer.order_completed.message', order_number: @order.order_number, shop_name: @shop.name) %></p>

        <div class="order-info">
          <h3><%= t('order_mailer.order_completed.order_details') %></h3>
          <p><strong><%= t('activerecord.attributes.order.order_number') %>:</strong> <%= @order.order_number %></p>
          <p><strong><%= t('activerecord.attributes.order.created_at') %>:</strong> <%= @order.created_at.strftime("%B %d, %Y") %></p>
          <% if @order.delivery_date %>
            <p><strong><%= t('activerecord.attributes.order.delivery_date') %>:</strong> <%= @order.delivery_date.strftime("%B %d, %Y") %></p>
          <% end %>
          <p><strong><%= t('activerecord.attributes.order.total_price') %>:</strong> <%= number_to_currency(@order.total_price) %></p>
        </div>

        <div class="order-details">
          <h3><%= t('order_mailer.order_completed.items') %></h3>
          <table>
            <thead>
              <tr>
                <th><%= t('orders.line_items.name') %></th>
                <th><%= t('orders.line_items.quantity') %></th>
                <th><%= t('orders.line_items.price') %></th>
                <th><%= t('orders.line_items.total_price') %></th>
              </tr>
            </thead>
            <tbody>
              <% @order.line_items.each do |item| %>
                <tr>
                  <td><%= item.name %></td>
                  <td><%= item.number_of_pieces %></td>
                  <td><%= number_to_currency(item.price) %></td>
                  <td><%= number_to_currency(item.price * item.number_of_pieces) %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
          <p class="total"><%= t('order_mailer.order_completed.total') %>: <%= number_to_currency(@order.total_price) %></p>
        </div>

        <p><%= t('order_mailer.order_completed.next_steps') %></p>
        
        <div style="text-align: center; margin: 30px 0;">
          <p><%= t('order_mailer.order_completed.contact_info') %></p>
          <% if @customer.phone.present? %>
            <p><strong><%= t('activerecord.attributes.customer.phone') %>:</strong> <%= @customer.phone %></p>
          <% end %>
        </div>
      </div>

      <div class="footer">
        <p><%= t('order_mailer.order_completed.thanks', shop_name: @shop.name) %></p>
        <p><%= t('order_mailer.order_completed.footer') %></p>
      </div>
    </div>
  </body>
</html> 